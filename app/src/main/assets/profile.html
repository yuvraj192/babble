<!DOCTYPE html>
<html lang="en" xmlns:text-align="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link href="tailwind.css" rel="stylesheet">
    <link rel="stylesheet" href="icons.css">
    <script src="jquery.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" />
</head>

<body style="background-color:#7d4df9;overflow:none !important;">
<header class="text-gray-700 body-font fixed inset-x-0 top-0 z-10" style="height:56px;">
    <div class="container mx-auto flex p-5 flex-col items-center">
        <nav class="flex items-center text-base fixed left-0 top-0 ml-6 mt-5">
            <a id="settings" class="mr-5 rounded-full text-xl text-white" onclick="profile.close()"> <i
                    class="material-icons ">chevron_left</i><span style="margin-top:-30px;">Back</span></a>
        </nav>
    </div>
</header>

<section class="text-gray-700 body-font mt-16">
    <div class="flex flex-wrap -m-2">
        <div class="p-2 lg:w-1/3 md:w-1/2 w-full">
            <div class="h-full flex items-center p-4 rounded-lg">
                <img alt="team"
                     class="w-20 h-20 bg-white object-cover object-center flex-shrink-0 rounded-full mr-4 dpimg"
                     src="https://contacts.zoho.com/file?ID=3031352&t=user&fs=thumb" type="image/jpeg" onclick="photo.Gallery()" />
                <div class="flex-grow">
                    <h2 class="text-2xl title-font font-bold text-white">Holden Caulfield</h2>
                    <p class="text-gray-300">UI Designer</p>

                </div>
            </div>
        </div>
    </div>
    </div>
</section>

<section class="text-gray-700 body-font">
    <div class="flex -m-4 text-center -mt-10">
        <div class="p-4 w-full">
            <div class="px-4 py-6 rounded-lg">
                <h2 class="title-font font-medium text-2xl text-white ml-2">2.7K</h2>
                <p class="leading-relaxed text-white text-sm  ">Followers</p>
            </div>
        </div>
        <div class="p-4 w-full">
            <div class="px-4 py-6 rounded-lg ">
                <h2 class="title-font font-medium text-2xl text-white ml-2">2.7K</h2>
                <p class="leading-relaxed text-white text-sm  ">Follower</p>
            </div>
        </div>
        <div class="p-4 w-full">
            <div class="px-4 py-6 rounded-lg ">
                <h2 class="title-font font-medium text-2xl text-white ml-2">2.7K</h2>
                <p class="leading-relaxed text-white text-sm  ">Followers</p>
            </div>
        </div>

    </div>
</section>
<div class="fixed inset-x-0 bottom-0 bg-white w-full animate__animated animate__slideInUp animate__faster"
     style="height: 70%;border-top-left-radius:50px;border-top-right-radius:50px;"></div>
</body>
<script>
    var phoneNumber;

    function loadDp() {
        var xhr = new XMLHttpRequest();
        xhr.onload = function (e) {
            if (this.readyState === 4) {
                $(".dpimg").attr('src', `http://iotine.zapto.org/Babble/uploads/${this.responseText}`)
            }
        };
        xhr.open("GET", "http://iotine.zapto.org:4600/dpOf/" + phoneNumber, true);
        xhr.send();
    }

    function setPno(num){
        phoneNumber = num

        loadDp()
    }

    async function prevImage(url, num) {
        var mediaType = url.split("/")
        phoneNumber = num
        uploadImage(url);
    }

    function uploadImage(url) {
        var img = new Image;
        var c = document.createElement("canvas");
        var ctx = c.getContext("2d");
        var filename = new Date().toISOString() + ".jpeg";

        img.onload = function () {
            c.width = this.naturalWidth; // update canvas size to match image
            c.height = this.naturalHeight;
            ctx.drawImage(this, 0, 0); // draw in image
            c.toBlob(function (blob) { // get content as JPEG blob
                var xhr = new XMLHttpRequest();
                xhr.onload = function (e) {
                    if (this.readyState === 4) {
                        $(".dpimg").attr('src', url)
                    }
                };
                var fd = new FormData();
                fd.append("dp_data", blob, filename);
                xhr.open("POST", "http://iotine.zapto.org:4600/newdp/" + phoneNumber, true);
                xhr.send(fd);
            }, "image/jpeg", 0.75);
        };
        img.crossOrigin = "Anonymous"; // if from different origin
        img.src = url;
    }

</script>

</html>